<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Resultados — ICFES Saber 11</title>

    <!-- Bootstrap 5 -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >

    <style>
        body {
            background: #f5f7fa;
            padding-bottom: 40px;
        }
        .card-custom {
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0.1);
        }
        .title-section {
            font-weight: 600;
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }
    </style>
</head>

<body>

<div class="container mt-5">

    <div class="card card-custom p-4">

        <h3 class="text-center mb-4">Resultados de la Consulta</h3>

        <!-- Si hubo error -->
        {% if resultado.error %}
            <div class="alert alert-danger">
                <strong>Error:</strong> {{ resultado.error }}
            </div>
        {% endif %}

        <!-- Datos del estudiante -->
        <div class="mb-4">
            <div class="title-section">Información del Estudiante</div>
            <ul class="list-group">
                <li class="list-group-item">
                    <strong>Nombre:</strong> {{ resultado.nombre_estudiante or 'No disponible' }}
                </li>
                <li class="list-group-item">
                    <strong>Tipo Documento:</strong> {{ resultado.tipo_documento }}
                </li>
                <li class="list-group-item">
                    <strong>Número Documento:</strong> {{ resultado.numero_documento }}
                </li>
                <li class="list-group-item">
                    <strong>Fecha de Nacimiento:</strong> {{ resultado.fecha_nacimiento }}
                </li>
            </ul>
        </div>

        <!-- Puntaje general -->
        <div class="mb-4">
            <div class="title-section">Desempeño General</div>
            <ul class="list-group">
                <li class="list-group-item">
                    <strong>Puntaje General:</strong> {{ resultado.puntaje_general or 'No disponible' }}
                </li>
                <li class="list-group-item">
                    <strong>Percentil General:</strong> {{ resultado.percentil_general or 'No disponible' }}
                </li>
            </ul>
        </div>

        <!-- Puntaje por pruebas -->
        <div class="mb-4">
            <div class="title-section">Resultados por Prueba</div>

            <table class="table table-striped">
                <thead class="table-primary">
                    <tr>
                        <th>Prueba</th>
                        <th>Puntaje</th>
                        <th>Percentil</th>
                    </tr>
                </thead>
                <tbody>
                    {% set pruebas = [
                        ('Lectura Crítica', 'lectura_critica'),
                        ('Matemáticas', 'matematicas'),
                        ('Sociales y Ciudadanas', 'sociales'),
                        ('Ciencias Naturales', 'ciencias_naturales'),
                        ('Inglés', 'ingles'),
                    ] %}
                    {% for nombre, clave in pruebas %}
                        <tr>
                            <td>{{ nombre }}</td>
                            <td>{{ resultado['puntaje_' + clave] or '—' }}</td>
                            <td>{{ resultado['percentil_' + clave] or '—' }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Screenshot -->
        {% if resultado.screenshot_path %}
            <div class="mb-4 text-center">
                <div class="title-section">Captura de Pantalla</div>
                <img
                    src="{{ url_for('ver_screenshot', filename=(resultado.screenshot_path | replace('./', '') | replace('\\', '/')).split('/')[-1]) }}"
                    class="img-fluid rounded border"
                    style="max-height: 450px;"
                >
            </div>
        {% endif %}

        <!-- Botón volver -->
        <div class="text-center mt-4">
            <a href="{{ url_for('index') }}" class="btn btn-secondary">← Volver</a>
        </div>

    </div>
</div>

</body>
</html>